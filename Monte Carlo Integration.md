# Monte Carlo Integration



## 蒙特卡洛积分方法：对连续光能传输函数进行采样

我们所需要处理的渲染方程是一个复杂的积分形式。

一般，我们用数值计算方法（黎曼积分方法）求解积分时，最简单的将积分区间划分为$n$等分，将每一小区间所对应的积分面积近似为长方形，计算在该区间的函数数值并乘以步长，最后将所有小长方形进行相加得到积分结果。

Monte Carlo方法是一大类随机算法的总称，通过随机样本估算真实值。将Monte Carlo方法应用于积分的求解上，可以帮助我们对定积分进行近似，从而估计出积分的值。其基本形式是：
$$
\int f(x)dx\approx\frac{1}{N}\sum^N_{i=1}\frac{f(X_i)}{p(X_i)}
$$
相较于黎曼积分方法，这种方法在数学意义上是无偏的。对此，可以通过求解数学期望进行证明：
$$
E_{X_i-p(x)}(\frac{f(X_i)}{p(X_i)})
=\int \frac{f(x)}{p(x)}p(x)dx
=\int f(x)dx
$$
同时，可以指定分布对被积分函数进行采样，而不用拘于固定步长。也正因如此，Monte Carlo积分方法允许我们使用重要性采样的策略。

## 减小方差

### 重要性采样：对渲染方程收敛速度的优化

### 分层采样：减小方差



